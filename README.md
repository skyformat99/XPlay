# XPlay
一个只有最低程度GUI的多媒体播放器，支持流媒体，基于libmpv开发。

## libmpv
我是在Windows平台上进行开发的，在Windows平台上使用libmpv不如Linux方便，但用过一次就很简单了。
1. 到[mpv官网](https://mpv.io/)下载针对Windows平台的开发包，在[官网的下载页](https://mpv.io/installation/)你会发现Windows平台有两种编译版本，其中第一个即为mpv代码仓库的所有者所编译的，第二个我不清楚，他们两个编译出来的二进制文件大小也不一样，他们两个也都没说有什么区别，我自己也看不出来有什么差别，保险起见，我推荐[下载第一个](https://mpv.srsfckn.biz/)，但第一个二进制文件更新比较慢，基本两个月更新一次，第二个快不少，可能几十天甚至十几天就更新一次。这里请大家自己做出取舍。
2. 将开发包中的头文件和库文件解压缩到XPlay代码仓库的根目录，头文件都放到**include\mpv**文件夹下，库文件都放到**lib**文件夹下
3. 检查库文件中是否包含**mpv.lib**，没有就自己手动生成：
    1. 打开**mpv.def**，检查文件第一行是否为**EXPORTS**，不是就手动添加，修改完毕后，此文件第一行必须为**EXPORTS**（第一行只能有这一个单词，不能有其他任何东西）
    2. 打开**Visual Studio 开发人员命令提示**，这个只要装了VS就有，在开始菜单VS的程序组里，什么VS版本无所谓，只要有类似的东西就行，一般会有好几个名字差不多的，我试了试，基本打开哪个都行
    3. 使用**cd /d**命令切换到XPlay代码仓库的根目录下的**lib**文件夹，运行**lib /def:mpv.def /name:mpv-1.dll /out:mpv.lib /MACHINE:X86**命令（这个命令会生成32位的lib文件，如果想生成64位的就把MACHINE:X86参数换成**MACHINE:X64**）
    4. 此时lib文件夹下就生成了可用的lib库文件（如果lib文件大小<=2KB，那这个文件就是错误的，要检查哪里出错了，需要重新生成），这之后就按照一般的引用lib库文件的步骤编写pro文件来引用它即可。注意，官方例子只适合在Linux上编译，Windows平台要按我这个步骤生成lib库后引用此库文件才能通过编译。
4. 使用Qt Creator打开pro文件，先执行一遍qmake，再编译（最好重新生成），此时应该能编译通过了